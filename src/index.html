<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>展示区</title>
    <base href="./" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
  </head>
  <body>
    <my-button></my-button>
    <my-dialog></my-dialog>
    <my-container></my-container>
    <my-input></my-input>
    <my-radio></my-radio>
    <my-text></my-text>
    <my-form></my-form>
    <my-button-0></my-button-0><my-form-0></my-form-0>
  </body>
  <script>
    class MyButton0 extends ButtonComponent {
      constructor() {
        super();
        this.disabled = false;
        this.ghost = false;
        this.loading = false;
        this.shape = "";
        this.size = "default";
        this.type = "primary";
        this.block = false;
        this.danger = false;
        this.icon = "search";
        this.name = "search";
      }
    }
    MyButton0.ɵcmp.factory = () => {
      return new MyButton0();
    };
    customElements.define(
      "my-button-0",
      createCustomElement(MyButton0, { injector: injector })
    );
    class MyForm0 extends FormComponent {
      constructor() {
        super();
        console.log("Ia", Ia);
        window["Ia"] = Ia;
        this.formgroup = "fg";
        this.api = "/suger/records";
      }
    }
    MyForm0.ɵcmp.factory = () => {
      return new FormComponent();
    };
    customElements.define(
      "my-form-0",
      createCustomElement(MyForm0, { injector: injector })
    );

    //初始化事件
    [
      ["click", "submit"],
      ["when200", "normal"],
      ["when500", "normal"],
    ].forEach((fnTofn, index) => {
      const [event, fn] = fnTofn;
      const sourceDOM = document.querySelector("my-button-0"),
        targetDOM = document.querySelector("my-form-0");
      if (index === 0) {
        sourceDOM.addEventListener(event, (e) => {
          targetDOM._ngElementStrategy.componentRef.instance[fn]();
        });
      } else {
        targetDOM.addEventListener(event, (e) => {
          sourceDOM._ngElementStrategy.componentRef.instance[fn]();
        });
      }
    });
  </script>
</html>
